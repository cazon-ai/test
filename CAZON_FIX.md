# ðŸ¤– Cazon AI Fix Instructions

@copilot please implement the fix described below

**Error ID:** `c5c89fbc-ea2a-4459-ae1c-53deb00c6247`

## Error Details

**Message:** Error: Database connection timeout

**File:** `src/repositories/user.js`
**Line:** 45

## ðŸ”§ Suggested Fix

Implement connection pooling with retry logic:

const pool = new Pool({
  max: 20,
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 5000,
});

Async function queryWithRetry(query, params, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await pool.query(query, params);
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
    }
  }
}

Also consider implementing circuit breaker pattern for database failures.

## ðŸ“‹ Implementation Steps

1. Review the error message and stack trace below
2. Apply the suggested fix to the affected file
3. Test the changes locally
4. Remove this file (CAZON_FIX.md) before merging

## Stack Trace

```
Error: Database connection timeout
    at Pool.connect (node_modules/pg/pool.js:234:23)
    at async UserRepository.findById (src/repositories/user.js:45:7)
    at async UserService.getUser (src/services/user.js:12:5)```

---
*Generated by [Cazon Error Intelligence](https://cazon.dev)*
